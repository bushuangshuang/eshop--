webpackJsonp([36],{"4h74":function(t,e){},PWsk:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("fqE/"),i=o("0Mti"),a=o("PNIw"),r=o("Fd2+"),c={name:"AccountSetting",components:{commonHeader:n.a},data:function(){return{tittle:"账号设置",routerLeft:"/index/out",idCardFront:"",imgFileUrl:i.c,showFriend:!1,modification:!1,bindphone:localStorage.getItem("phone"),newphone:"",vicode:"",codeDisabled:!1,verifyText:"获取验证码",countdown:60,timer:null,url:this.$route.params.url,oldurl:""}},mounted:function(){},activated:function(){},methods:{getCode:function(){var t=this;if(void 0!==this.vicode&&null!==this.vicode&&""!==this.vicode){if(!1!==/^[1][3,4,5,6,7,8][0-9]{9}$/.test(this.vicode)){if(this.timer||(this.timer=setInterval(function(){t.countdown>0&&t.countdown<=60&&(t.countdown--,0!==t.countdown?(t.verifyText="重新发送("+t.countdown+")",t.codeDisabled=!0):(clearInterval(t.timer),t.verifyText="获取验证码",t.countdown=60,t.timer=null,t.codeDisabled=!1))},1e3)),1!=this.codeDisabled){var e={phone:this.vicode};a.f(e).then(function(t){console.log(t.data),"200"===t.data.code?Object(r.d)("短信发送成功"):Object(r.d)(t.data.msg)}).catch(function(t){Object(r.d)("发送失败，请重试或联系管理员！")})}}else Object(r.d)("请输入正确的手机号")}else Object(r.d)("手机号码不能为空")},bindingphone:function(){this.showFriend=!0},userimg:function(){this.oldurl||this.updateurl},beforeClose:function(t,e){"confirm"===t&&(this.modification=!0),e()},beforeClosenew:function(t,e){e()},dropout:function(){var t=this;this.$dialog.confirm({message:"确认退出"}).then(function(){localStorage.clear("realName"),t.$router.push("/")}).catch(function(){t.$router.push("/day")})},realname:function(){this.$router.push("/day/realname")},getperson:function(){var t=this,e={photo:this.idCardFront};a.p(e).then(function(e){t.oldurl=e.data.User.photo}).catch(function(t){console.log(t)})},updateperson:function(){var t=this,e={photo:this.idCardFront};a.G(e).then(function(e){t.updateurl=e.data.ConfUser.photo}).catch(function(t){console.log(t)})},onReadIdCardFront:function(t){var e=this;this.idCardFront="";var o=new FormData;o.append("upfile",t.file),a.H(o).then(function(t){"200"===t.data.code?(e.idCardFront=t.data.list[0],e.updateperson()):Object(r.d)(t.data.msg)}).catch(function(t){console.log(t)})}}},l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"Account-box"},[o("common-header",{attrs:{tittle:t.tittle,showleft:!0,routerLeft:t.routerLeft}}),t._v(" "),o("div",{staticClass:"out-one"},[o("li",[o("van-uploader",{attrs:{"after-read":t.onReadIdCardFront,accept:"image/gif, image/jpeg",multiple:""}},[o("span",[t._v("头像")]),t._v(" "),"1"==t.userimg()?o("img",{attrs:{src:t.imgFileUrl+t.url,alt:""}}):t._e(),t._v(" "),this.idCardFront&&""!=this.idCardFront?o("img",{staticClass:"img-file",attrs:{src:t.imgFileUrl+this.idCardFront,alt:""}}):t._e(),t._v(" "),"2"==t.userimg()?o("img",{attrs:{src:t.imgFileUrl+t.updateurl,alt:""}}):t._e()]),t._v(" "),o("van-icon",{attrs:{name:"arrow"}})],1),t._v(" "),o("li",{on:{click:t.realname}},[o("span",[t._v("实名认证")]),o("van-icon",{attrs:{name:"arrow"}})],1),t._v(" "),o("li",{on:{click:t.bindingphone}},[o("span",[t._v("绑定手机号")]),o("span",[t._v("已绑")]),o("van-icon",{attrs:{name:"arrow"}})],1)]),t._v(" "),o("li",{staticClass:"btn"},[o("van-button",{on:{click:t.dropout}},[t._v("退出当前账号")])],1),t._v(" "),o("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeClose,"confirm-button-text":"修改"},model:{value:t.showFriend,callback:function(e){t.showFriend=e},expression:"showFriend"}},[o("van-field",{staticClass:"dialog-inp",attrs:{label:"手机号",placeholder:"请输入姓名"},model:{value:t.bindphone,callback:function(e){t.bindphone=e},expression:"bindphone"}})],1),t._v(" "),o("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeClosenew,"confirm-button-text":"修改"},model:{value:t.modification,callback:function(e){t.modification=e},expression:"modification"}},[o("van-field",{staticClass:"dialog-inp",attrs:{label:"新手机号",placeholder:"请输入新的手机号"},model:{value:t.newphone,callback:function(e){t.newphone=e},expression:"newphone"}},[o("van-button",{style:0==t.codeDisabled?"border: 1px solid #F88F6B;background-color:#F88F6B":"background-color:#9D9D9D;border: 1px solid #9D9D9D;",attrs:{slot:"button",size:"small",type:"primary"},on:{click:t.getCode},slot:"button"},[t._v(t._s(t.verifyText))])],1),t._v(" "),o("van-field",{staticClass:"dialog-inp",attrs:{label:"验证码",placeholder:"请输入手机验证码"},model:{value:t.vicode,callback:function(e){t.vicode=e},expression:"vicode"}})],1)],1)},staticRenderFns:[]};var s=o("VU/8")(c,l,!1,function(t){o("4h74")},"data-v-5c87d550",null);e.default=s.exports}});
//# sourceMappingURL=36.e06b6c60a7426df9df14.js.map